<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
		<meta http-equiv='cache-control' content='no-cache'>
		<meta http-equiv='expires' content='0'>
		<meta http-equiv='pragma' content='no-cache'>

    <title>metamask bind result</title>
    <script src="web3.min.js"></script> 
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://apis.google.com/js/platform.js?onload=init" async defer></script>
<script>
var timestamp = new Date();
var lable = timestamp.getTime();
//document.write("<script type='module' src='apiMetamask.js?version=" + lable + "'><\/script>");
</script>  
<script type='module' src='apiMetamask.js?version=123122'></script>
<script> 
function getUrlParameter(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    var results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
};

 
</script> 
</head>
<body>
ChtLand Wallet Board V0.3.0

	<h2>終端用戶:</h2>

	  <b>Browser:</b><div id="browser"></div><br/>
    <b>User-Agent:</b><div id="agent"></div><br/>
    <b>idMember:</b><div id="idMember"></div><br/>

	<h2>錢包資訊:</h2>
    錢包位址:<div id="address">未連結錢包</div>
		錢包餘額:<div id="balance"></div>
 	<hr/>
 
 		<a href="" id="targetService"></a>
 
	<hr/>
	<h2>錢包操作:</h2> 
		接收端：<input type="text" id="receiver" name="receiver" maxlength="42" value="0xef4ffecffc3a42115f617d7ab1a1bfe62e1c90dd" size="42"/><br/>
		額  度：<input type="text" id="amount" name="amount" maxlength="21" value="3"/><br/>
		<button class="enableEthereumButton btn">Enable Ethereum</button>
		<button class="sendEthButton btn">Send ETH</button>
 
<!-- Code injected by live-server -->
<script>
	
var addressElement = document.getElementById("address");
addressElement.textContent = '未連結錢包';	
	//----------------------------------------------------
	var browser = getUrlParameter('browser');
	console.log('Browser:', browser);
	var elemBrowser = document.getElementById("browser");
	elemBrowser.textContent = browser;	
	
	//navigator.userAgent
	console.log('Browser:', navigator.userAgent);
	var elemAgent = document.getElementById("agent");
	elemAgent.textContent = navigator.userAgent;	
		
	var idMember = getUrlParameter('idMember');
	console.log('idMember:', idMember);
	var elemMember = document.getElementById("idMember");
	elemMember.textContent = idMember;	
			
	var userAddress = getUrlParameter('address');
	console.log('User Address:', userAddress);
	var elemAddress = document.getElementById("address");
	elemAddress.textContent = userAddress;	

	var balance = getUrlParameter('balance');
	console.log('Balance:', balance);
	var elemBalance = document.getElementById("balance");
	elemBalance.textContent = balance;


	var urlTarget = 'https://cht.yocity.com.tw/goscene.html?subjectid=16&address=' + userAddress + '&balance=' + balance;
	var elemtargetService = document.getElementById("targetService");
	elemtargetService.href = urlTarget;
	elemtargetService.innerHTML = '手動轉導 至 yocity(' + urlTarget + ')';
  
  
  //window.location.href = 'https://cht.yocity.com.tw/goscene.html?subjectid=16&address=' + userAddress + '&balance=' + balance;
</script>
</body>
</html>